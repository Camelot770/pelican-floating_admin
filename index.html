<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ü–µ–ª–∏–∫–∞–Ω ‚Äî –ê–¥–º–∏–Ω v2.1</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #1a1a24;
            --text-primary: #ffffff;
            --text-secondary: #8b8b9e;
            --accent-cyan: #00d4ff;
            --accent-green: #00ff88;
            --accent-orange: #ff9500;
            --accent-red: #ff5252;
            --accent-purple: #a855f7;
            --border-color: rgba(255,255,255,0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(168,85,247,0.1));
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header h1 {
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .header .subtitle {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 4px;
        }
        
        /* Stats Row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            padding: 16px;
        }
        
        .stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-cyan);
        }
        
        .stat-label {
            font-size: 10px;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: var(--bg-secondary);
            padding: 8px;
            gap: 4px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-tab {
            flex: 1;
            padding: 10px 4px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .nav-tab.active {
            background: var(--bg-card);
            color: var(--accent-cyan);
        }
        
        .nav-tab-icon {
            font-size: 18px;
        }
        
        /* Content */
        .content {
            padding: 16px;
            padding-bottom: 100px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .card-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-subtitle {
            color: var(--text-secondary);
            font-size: 13px;
        }
        
        /* Booking Card */
        .booking-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid var(--accent-cyan);
        }
        
        .booking-card.cancelled {
            border-left-color: var(--accent-red);
            opacity: 0.6;
        }
        
        .booking-time {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-cyan);
        }
        
        .booking-service {
            font-weight: 500;
            margin: 8px 0 4px;
        }
        
        .booking-client {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .booking-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        /* Certificate Card */
        .cert-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid var(--accent-orange);
        }
        
        .cert-card.paid {
            border-left-color: var(--accent-green);
        }
        
        .cert-card.used {
            border-left-color: var(--text-secondary);
            opacity: 0.6;
        }
        
        .cert-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .cert-status.pending {
            background: rgba(255,149,0,0.2);
            color: var(--accent-orange);
        }
        
        .cert-status.paid {
            background: rgba(0,255,136,0.2);
            color: var(--accent-green);
        }
        
        .cert-status.used {
            background: rgba(139,139,158,0.2);
            color: var(--text-secondary);
        }
        
        /* Client Card */
        .client-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .client-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 600;
        }
        
        .client-info {
            flex: 1;
        }
        
        .client-name {
            font-weight: 600;
        }
        
        .client-phone {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .client-stats {
            text-align: right;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* Buttons */
        .btn {
            padding: 10px 16px;
            border-radius: 10px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            color: #000;
        }
        
        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .btn-danger {
            background: rgba(255,82,82,0.2);
            color: var(--accent-red);
        }
        
        .btn-success {
            background: rgba(0,255,136,0.2);
            color: var(--accent-green);
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 12px;
        }
        
        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }
        
        /* Date Selector */
        .date-selector {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 8px;
            margin-bottom: 16px;
        }
        
        .date-item {
            flex-shrink: 0;
            width: 56px;
            padding: 12px 8px;
            background: var(--bg-card);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .date-item.active {
            border-color: var(--accent-cyan);
            background: rgba(0,212,255,0.1);
        }
        
        .date-item.blocked {
            background: rgba(255,82,82,0.1);
            border-color: var(--accent-red);
        }
        
        .date-day {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
        
        .date-num {
            font-size: 20px;
            font-weight: 700;
            margin-top: 4px;
        }
        
        .date-count {
            font-size: 10px;
            color: var(--accent-cyan);
            margin-top: 4px;
        }
        
        /* Settings */
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .setting-item:last-child {
            border: none;
        }
        
        .setting-label {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .setting-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .setting-value {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        /* Time Slots Grid */
        .slots-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 16px;
        }
        
        .slot-item {
            padding: 12px 8px;
            background: var(--bg-secondary);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .slot-item.available {
            background: rgba(0,255,136,0.1);
            border-color: rgba(0,255,136,0.3);
        }
        
        .slot-item.booked {
            background: rgba(0,212,255,0.1);
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }
        
        .slot-item.blocked {
            background: rgba(255,82,82,0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }
        
        .slot-item.selected {
            border-color: var(--accent-purple);
            background: rgba(168,85,247,0.2);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        /* Search */
        .search-box {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
        }
        
        .search-input::placeholder {
            color: var(--text-secondary);
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            width: 100%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }
        
        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .modal-actions .btn {
            flex: 1;
        }
        
        /* Input */
        .input-group {
            margin-bottom: 16px;
        }
        
        .input-label {
            display: block;
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }
        
        .input-field {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .input-field:focus {
            border-color: var(--accent-cyan);
        }
        
        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--bg-secondary);
            border-top-color: var(--accent-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Filter tabs */
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            overflow-x: auto;
        }
        
        .filter-tab {
            padding: 8px 16px;
            background: var(--bg-card);
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            white-space: nowrap;
            border: 1px solid var(--border-color);
        }
        
        .filter-tab.active {
            background: var(--accent-cyan);
            color: #000;
            border-color: var(--accent-cyan);
        }
        
        /* QR Scanner hint */
        .qr-hint {
            background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(0,212,255,0.1));
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            margin-bottom: 16px;
        }
        
        .qr-hint-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }
        
        .qr-hint-text {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        /* Action buttons grid */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .action-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }
        
        .action-card:active {
            transform: scale(0.98);
        }
        
        .action-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .action-title {
            font-weight: 500;
            font-size: 14px;
        }
        
        .badge {
            display: inline-block;
            padding: 2px 8px;
            background: var(--accent-red);
            color: white;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü¶© –ü–µ–ª–∏–∫–∞–Ω <span style="color: var(--accent-purple)">–ê–¥–º–∏–Ω</span></h1>
        <div class="subtitle" id="todayDate">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
    
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-value" id="statToday">-</div>
            <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="statWeek">-</div>
            <div class="stat-label">–ù–µ–¥–µ–ª—è</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="statClients">-</div>
            <div class="stat-label">–ö–ª–∏–µ–Ω—Ç—ã</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="statCerts">-</div>
            <div class="stat-label">–°–µ—Ä—Ç.</div>
        </div>
    </div>
    
    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="switchTab('schedule')">
            <span class="nav-tab-icon">üìÖ</span>
            <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
        </button>
        <button class="nav-tab" onclick="switchTab('certs')">
            <span class="nav-tab-icon">üéÅ</span>
            <span>–°–µ—Ä—Ç-—Ç—ã</span>
        </button>
        <button class="nav-tab" onclick="switchTab('promos')">
            <span class="nav-tab-icon">üì¢</span>
            <span>–†–∞—Å—Å—ã–ª–∫–∞</span>
        </button>
        <button class="nav-tab" onclick="switchTab('clients')">
            <span class="nav-tab-icon">üë•</span>
            <span>–ö–ª–∏–µ–Ω—Ç—ã</span>
        </button>
        <button class="nav-tab" onclick="switchTab('settings')">
            <span class="nav-tab-icon">‚öôÔ∏è</span>
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </button>
    </nav>
    
    <div class="content">
        <!-- SCHEDULE TAB -->
        <section id="scheduleTab" class="section active">
            <div class="date-selector" id="dateSelector"></div>
            
            <div class="card-header">
                <div class="card-title">üìã –ó–∞–ø–∏—Å–∏ –Ω–∞ <span id="selectedDateText">—Å–µ–≥–æ–¥–Ω—è</span></div>
                <button class="btn btn-small btn-secondary" onclick="showBlockDayModal()">üö´ –í—ã—Ö–æ–¥–Ω–æ–π</button>
            </div>
            
            <div id="bookingsList"></div>
            
            <div class="section-title" style="margin-top: 24px;">üïê –°–ª–æ—Ç—ã</div>
            <div class="slots-grid" id="slotsGrid"></div>
        </section>
        
        <!-- CERTIFICATES TAB -->
        <section id="certsTab" class="section">
            <!-- –í–≤–æ–¥ –∫–æ–¥–∞ -->
            <div class="card" style="background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(0,255,136,0.1)); margin-bottom: 16px;">
                <div style="text-align: center; margin-bottom: 12px;">
                    <span style="font-size: 32px;">üîë</span>
                    <div style="font-weight: 600; margin-top: 8px;">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <input type="text" 
                           id="certCodeInput" 
                           class="input-field" 
                           placeholder="12345" 
                           style="text-align: center; font-size: 24px; letter-spacing: 4px; font-weight: 600;"
                           maxlength="5"
                           inputmode="numeric"
                           pattern="[0-9]*">
                    <button class="btn btn-primary" onclick="checkCertCode()" style="white-space: nowrap;">
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                    </button>
                </div>
            </div>
            
            <div class="filter-tabs">
                <div class="filter-tab active" onclick="filterCerts('pending')">‚è≥ –û–∂–∏–¥–∞—é—Ç</div>
                <div class="filter-tab" onclick="filterCerts('paid')">‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ</div>
                <div class="filter-tab" onclick="filterCerts('used')">üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã</div>
                <div class="filter-tab" onclick="filterCerts('all')">–í—Å–µ</div>
            </div>
            
            <div id="certsList"></div>
        </section>
        
        <!-- BROADCAST TAB -->
        <section id="promosTab" class="section">
            <!-- –†–∞—Å—Å—ã–ª–∫–∞ -->
            <div class="card" style="background: linear-gradient(135deg, rgba(99,102,241,0.1), rgba(168,85,247,0.1)); margin-bottom: 16px;">
                <div style="text-align: center; margin-bottom: 12px;">
                    <span style="font-size: 32px;">üì¢</span>
                    <div style="font-weight: 600; margin-top: 8px;">–†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                    <div style="color: var(--text-secondary); font-size: 13px;" id="subscribersCount">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="showBroadcastModal()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</button>
            </div>
            
            <div class="card" style="background: var(--bg-secondary);">
                <div class="section-title" style="margin-bottom: 12px;">üí° –°–æ–≤–µ—Ç—ã –ø–æ —Ä–∞—Å—Å—ã–ª–∫–µ</div>
                <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                    ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ *–∑–≤—ë–∑–¥–æ—á–∫–∏* –¥–ª—è <b>–∂–∏—Ä–Ω–æ–≥–æ</b> —Ç–µ–∫—Å—Ç–∞<br>
                    ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ _–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è_ –¥–ª—è <i>–∫—É—Ä—Å–∏–≤–∞</i><br>
                    ‚Ä¢ –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ<br>
                    ‚Ä¢ –ü–∏—à–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É
                </div>
            </div>
        </section>
        
        <!-- CLIENTS TAB -->
        <section id="clientsTab" class="section">
            <div class="search-box">
                <span>üîç</span>
                <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É" oninput="searchClients(this.value)">
            </div>
            
            <div id="clientsList"></div>
        </section>
        
        <!-- SETTINGS TAB -->
        <section id="settingsTab" class="section">
            <div class="section-title">üè¢ –ë–∏–∑–Ω–µ—Å</div>
            <div class="card">
                <div class="setting-item" onclick="editSetting('business_name')">
                    <div class="setting-label">
                        <div class="setting-icon">üè∑</div>
                        <div>
                            <div>–ù–∞–∑–≤–∞–Ω–∏–µ</div>
                            <div class="setting-value" id="settingName">‚Äî</div>
                        </div>
                    </div>
                    <span>‚Ä∫</span>
                </div>
                <div class="setting-item" onclick="editSetting('business_address')">
                    <div class="setting-label">
                        <div class="setting-icon">üìç</div>
                        <div>
                            <div>–ê–¥—Ä–µ—Å</div>
                            <div class="setting-value" id="settingAddress">‚Äî</div>
                        </div>
                    </div>
                    <span>‚Ä∫</span>
                </div>
                <div class="setting-item" onclick="editSetting('business_phone')">
                    <div class="setting-label">
                        <div class="setting-icon">üìû</div>
                        <div>
                            <div>–¢–µ–ª–µ—Ñ–æ–Ω</div>
                            <div class="setting-value" id="settingPhone">‚Äî</div>
                        </div>
                    </div>
                    <span>‚Ä∫</span>
                </div>
            </div>
            
            <div class="section-title" style="margin-top: 24px;">üõ† –£—Å–ª—É–≥–∏</div>
            <div id="servicesList"></div>
            
            <div class="section-title" style="margin-top: 24px;">üì¢ –†–∞—Å—Å—ã–ª–∫–∞</div>
            <div class="card">
                <div class="setting-item" onclick="showBroadcastModal()">
                    <div class="setting-label">
                        <div class="setting-icon">üì®</div>
                        <div>
                            <div>–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</div>
                            <div class="setting-value">–í—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º</div>
                        </div>
                    </div>
                    <span>‚Ä∫</span>
                </div>
            </div>
        </section>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent"></div>
    </div>
    
    <script>
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
            tg.enableClosingConfirmation();
        }
        
        const API_URL = 'https://pelican-floating-camelot770.amvera.io';
        
        let scheduleData = {};
        let clientsData = [];
        let certsData = [];
        let settings = {};
        let currentCertFilter = 'pending';
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        function getLocalDateString(date = new Date()) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –¥–∞—Ç—É, –∞ –Ω–µ UTC
        let selectedDate = getLocalDateString();
        
        // ============== INIT ==============
        document.addEventListener('DOMContentLoaded', () => {
            updateTodayDate();
            initDateSelector();
            loadStats();
            loadSchedule(selectedDate);
            loadCerts();
            loadClients();
            loadSettings();
            loadSubscribersCount();
            
            // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è onclick
            window.markCertPaid = markCertPaid;
            window.callClient = callClient;
            window.copyToClipboard = copyToClipboard;
            window.useCertByCode = useCertByCode;
            window.useCert = useCert;
            window.closeModal = closeModal;
            window.showClientDetails = showClientDetails;
            window.cancelBooking = cancelBooking;
            window.filterCerts = filterCerts;
            window.checkCertCode = checkCertCode;
            
            console.log('‚úÖ All functions registered globally');
        });
        
        function updateTodayDate() {
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('todayDate').textContent = 
                new Date().toLocaleDateString('ru-RU', options);
        }
        
        // ============== NAVIGATION ==============
        function switchTab(tabId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(tabId + 'Tab').classList.add('active');
            event.currentTarget.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∞–∫—Ü–∏–π
            if (tabId === 'promos') {
                loadSubscribersCount();
            }
            
            haptic('light');
        }
        
        function haptic(type) {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.impactOccurred(type);
            }
        }
        
        // ============== DATE SELECTOR ==============
        function initDateSelector() {
            const container = document.getElementById('dateSelector');
            const days = ['–í–°', '–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë'];
            
            for (let i = 0; i < 14; i++) {
                const date = new Date();
                date.setDate(date.getDate() + i);
                const dateStr = getLocalDateString(date);
                
                const item = document.createElement('div');
                item.className = 'date-item' + (i === 0 ? ' active' : '');
                item.dataset.date = dateStr;
                item.innerHTML = `
                    <div class="date-day">${days[date.getDay()]}</div>
                    <div class="date-num">${date.getDate()}</div>
                    <div class="date-count" id="count-${dateStr}">‚Äî</div>
                `;
                item.onclick = () => selectDate(dateStr);
                container.appendChild(item);
            }
        }
        
        function selectDate(dateStr) {
            selectedDate = dateStr;
            
            document.querySelectorAll('.date-item').forEach(el => {
                el.classList.toggle('active', el.dataset.date === dateStr);
            });
            
            const date = new Date(dateStr);
            const options = { day: 'numeric', month: 'long' };
            document.getElementById('selectedDateText').textContent = 
                date.toLocaleDateString('ru-RU', options);
            
            loadSchedule(dateStr);
            haptic('light');
        }
        
        // ============== API CALLS ==============
        async function apiCall(endpoint, options = {}) {
            try {
                const response = await fetch(`${API_URL}${endpoint}`, {
                    headers: { 'Content-Type': 'application/json', ...options.headers },
                    ...options
                });
                return await response.json();
            } catch (e) {
                console.error('API error:', e);
                return null;
            }
        }
        
        // ============== STATS ==============
        async function loadStats() {
            const data = await apiCall('/api/admin/stats');
            if (data) {
                document.getElementById('statToday').textContent = data.today_bookings || 0;
                document.getElementById('statWeek').textContent = data.week_bookings || 0;
                document.getElementById('statClients').textContent = data.total_clients || 0;
                document.getElementById('statCerts').textContent = data.pending_certs || 0;
            }
        }
        
        // ============== SCHEDULE ==============
        async function loadSchedule(date) {
            const container = document.getElementById('bookingsList');
            container.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            const data = await apiCall(`/api/admin/schedule/${date}`);
            
            if (!data || !data.bookings || data.bookings.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üì≠</div>
                        <div>–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å</div>
                    </div>
                `;
            } else {
                container.innerHTML = data.bookings.map(b => `
                    <div class="booking-card ${b.status === 'cancelled' ? 'cancelled' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <div class="booking-time">${b.time}</div>
                                <div class="booking-service">${b.service_name}</div>
                                <div class="booking-client">
                                    üë§ ${b.first_name || '–ö–ª–∏–µ–Ω—Ç'} ¬∑ 
                                    <a href="tel:${b.phone}" style="color: var(--accent-cyan)">${b.phone || '‚Äî'}</a>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: var(--accent-green); font-weight: 600;">${(b.price || 0).toLocaleString()} ‚ÇΩ</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">#${b.id}</div>
                            </div>
                        </div>
                        ${b.status === 'confirmed' ? `
                            <div class="booking-actions">
                                <button class="btn btn-small btn-secondary" onclick="callClient('${b.phone}')">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
                                <button class="btn btn-small btn-danger" onclick="cancelBooking('${b.id}')">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å</button>
                            </div>
                        ` : '<div style="color: var(--accent-red); margin-top: 8px; font-size: 13px;">–û—Ç–º–µ–Ω–µ–Ω–æ</div>'}
                    </div>
                `).join('');
            }
            
            // Update slots
            renderSlots(data?.slots || []);
            
            // Update date counter
            const countEl = document.getElementById(`count-${date}`);
            if (countEl) {
                const confirmedCount = (data?.bookings || []).filter(b => b.status === 'confirmed').length;
                countEl.textContent = confirmedCount > 0 ? confirmedCount : '‚Äî';
            }
        }
        
        function renderSlots(slots) {
            const grid = document.getElementById('slotsGrid');
            const slotTimes = [];
            
            for (let h = 10; h < 20; h++) {
                slotTimes.push(`${h.toString().padStart(2, '0')}:00`);
                slotTimes.push(`${h.toString().padStart(2, '0')}:30`);
            }
            
            grid.innerHTML = slotTimes.map(time => {
                const slot = slots.find(s => s.time === time) || {};
                let className = 'slot-item';
                
                if (slot.status === 'booked') className += ' booked';
                else if (slot.status === 'blocked') className += ' blocked';
                else className += ' available';
                
                return `<div class="${className}" onclick="toggleSlot('${time}', '${slot.status || 'available'}')">${time}</div>`;
            }).join('');
        }
        
        function toggleSlot(time, currentStatus) {
            if (currentStatus === 'booked') {
                showToast('–°–ª–æ—Ç –∑–∞–Ω—è—Ç –∫–ª–∏–µ–Ω—Ç–æ–º');
                return;
            }
            
            showModal(`
                <div class="modal-title">${time}</div>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    ${currentStatus === 'blocked' ? '–°–ª–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω' : '–°–ª–æ—Ç —Å–≤–æ–±–æ–¥–µ–Ω'}
                </p>
                <div class="modal-actions">
                    ${currentStatus === 'blocked' 
                        ? `<button class="btn btn-success" onclick="unblockSlot('${time}')">‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>`
                        : `<button class="btn btn-danger" onclick="blockSlot('${time}')">üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>`
                    }
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
        }
        
        async function blockSlot(time) {
            await apiCall(`/api/admin/slots/block`, {
                method: 'POST',
                body: JSON.stringify({ date: selectedDate, time: time })
            });
            closeModal();
            loadSchedule(selectedDate);
            showToast('–°–ª–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
        }
        
        async function unblockSlot(time) {
            await apiCall(`/api/admin/slots/unblock`, {
                method: 'POST',
                body: JSON.stringify({ date: selectedDate, time: time })
            });
            closeModal();
            loadSchedule(selectedDate);
            showToast('–°–ª–æ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
        }
        
        function showBlockDayModal() {
            showModal(`
                <div class="modal-title">üö´ –í—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å</div>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –¥–µ–Ω—å ${selectedDate}?
                </p>
                <div class="modal-actions">
                    <button class="btn btn-danger" onclick="blockDay()">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
        }
        
        async function blockDay() {
            await apiCall(`/api/admin/slots/block-day`, {
                method: 'POST',
                body: JSON.stringify({ date: selectedDate })
            });
            closeModal();
            loadSchedule(selectedDate);
            showToast('–î–µ–Ω—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
        }
        
        async function cancelBooking(bookingId) {
            showModal(`
                <div class="modal-title">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å?</div>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ
                </p>
                <div class="modal-actions">
                    <button class="btn btn-danger" onclick="confirmCancelBooking('${bookingId}')">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–ù–∞–∑–∞–¥</button>
                </div>
            `);
        }
        
        async function confirmCancelBooking(bookingId) {
            await apiCall(`/api/admin/bookings/${bookingId}/cancel`, { method: 'POST' });
            closeModal();
            loadSchedule(selectedDate);
            loadStats();
            showToast('–ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞');
        }
        
        function callClient(phone) {
            if (!phone) {
                showToast('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω', 'error');
                return;
            }
            
            // –û—á–∏—â–∞–µ–º –Ω–æ–º–µ—Ä –æ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –¥–µ—Ñ–∏—Å–æ–≤
            const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
            
            console.log('üìû Calling:', cleanPhone);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª —Å –Ω–æ–º–µ—Ä–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏
            showModal(`
                <div class="modal-title">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É</div>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 24px; font-weight: 600; margin: 16px 0; color: var(--accent-cyan);">
                        ${phone}
                    </div>
                </div>
                <div class="modal-actions" style="flex-direction: column; gap: 10px;">
                    <a href="tel:${cleanPhone}" class="btn btn-primary" style="text-decoration: none; display: block; text-align: center;">
                        üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                    </a>
                    <button class="btn btn-secondary" onclick="copyToClipboard('${cleanPhone}')">
                        üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä
                    </button>
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            `);
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('‚úÖ –ù–æ–º–µ—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω', 'success');
            }).catch(() => {
                // Fallback
                const input = document.createElement('input');
                input.value = text;
                document.body.appendChild(input);
                input.select();
                document.execCommand('copy');
                document.body.removeChild(input);
                showToast('‚úÖ –ù–æ–º–µ—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω', 'success');
            });
        }
        
        // ============== CERTIFICATES ==============
        async function loadCerts() {
            const data = await apiCall('/api/admin/certificates');
            if (data) {
                certsData = data;
                renderCerts();
            }
        }
        
        function filterCerts(filter) {
            currentCertFilter = filter;
            document.querySelectorAll('.filter-tab').forEach(el => {
                el.classList.toggle('active', el.textContent.toLowerCase().includes(
                    filter === 'pending' ? '–æ–∂–∏–¥–∞—é—Ç' : 
                    filter === 'paid' ? '–∞–∫—Ç–∏–≤–Ω—ã–µ' : 
                    filter === 'used' ? '–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã' : '–≤—Å–µ'
                ));
            });
            renderCerts();
            haptic('light');
        }
        
        function renderCerts() {
            const container = document.getElementById('certsList');
            let filtered = certsData;
            
            if (currentCertFilter !== 'all') {
                filtered = certsData.filter(c => c.status === currentCertFilter);
            }
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üéÅ</div>
                        <div>–ù–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filtered.map(c => `
                <div class="cert-card ${c.status}">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                        <div>
                            <div style="font-weight: 600;">${c.cert_name}</div>
                            <div style="color: var(--accent-green); font-size: 18px; font-weight: 600;">${(c.price || 0).toLocaleString()} ‚ÇΩ</div>
                        </div>
                        <span class="cert-status ${c.status}">
                            ${c.status === 'pending' ? '‚è≥ –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã' : c.status === 'paid' ? '‚úÖ –ê–∫—Ç–∏–≤–µ–Ω' : 'üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω'}
                        </span>
                    </div>
                    
                    ${c.redeem_code ? `
                        <div style="background: rgba(0,255,136,0.1); border-radius: 12px; padding: 12px; margin-bottom: 12px; text-align: center;">
                            <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">–ö–û–î –ê–ö–¢–ò–í–ê–¶–ò–ò</div>
                            <div style="font-size: 24px; font-weight: 700; letter-spacing: 3px; color: var(--accent-green); font-family: monospace;">
                                ${c.redeem_code}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">
                        üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${c.recipient_name}<br>
                        üì± ${c.recipient_email || '‚Äî'}
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); border-top: 1px solid var(--border-color); padding-top: 12px; margin-top: 12px;">
                        –ü–æ–∫—É–ø–∞—Ç–µ–ª—å: ${c.first_name || ''} ${c.buyer_phone || '‚Äî'}
                        <span style="float: right;">#${c.id}</span>
                    </div>
                    ${c.status === 'pending' ? `
                        <div class="booking-actions">
                            <button class="btn btn-small btn-success" onclick="console.log('Button clicked for:', '${c.id}'); markCertPaid('${c.id}')">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
                            <button class="btn btn-small btn-secondary" onclick="callClient('${c.buyer_phone}')">üìû</button>
                        </div>
                    ` : ''}
                    ${c.status === 'paid' ? `
                        <div class="booking-actions">
                            <button class="btn btn-small btn-primary" onclick="useCertByCode('${c.redeem_code}')">üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                        </div>
                    ` : ''}
                    ${c.status === 'used' && c.used_at ? `
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px; text-align: right;">
                            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω: ${new Date(c.used_at).toLocaleDateString('ru-RU')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        async function markCertPaid(certId) {
            console.log('üîÑ markCertPaid called for:', certId);
            showToast('‚è≥ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –æ–ø–ª–∞—Ç—É...', 'info');
            
            const url = `${API_URL}/api/admin/certificates/${certId}/paid`;
            console.log('üåê Requesting URL:', url);
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors'
                });
                
                console.log('üì• Response status:', response.status);
                const text = await response.text();
                console.log('üì• Response text:', text);
                
                let result;
                try {
                    result = JSON.parse(text);
                } catch (e) {
                    showModal(`
                        <div class="modal-title">‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞</div>
                        <div style="text-align: center; margin: 20px 0; color: var(--text-secondary);">
                            Status: ${response.status}<br>
                            Response: ${text.substring(0, 200)}
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-primary" onclick="closeModal()">OK</button>
                        </div>
                    `);
                    return;
                }
                
                if (response.ok && result) {
                    if (result.redeem_code) {
                        const telegramStatus = result.telegram_sent 
                            ? '‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é' 
                            : `‚ö†Ô∏è –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${result.telegram_error || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`;
                        
                        showModal(`
                            <div class="modal-title">‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ–ø–ª–∞—á–µ–Ω!</div>
                            <div style="text-align: center; margin: 20px 0;">
                                <div style="background: rgba(0,255,136,0.1); border-radius: 16px; padding: 20px; margin: 16px 0;">
                                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 8px;">–ö–û–î –ê–ö–¢–ò–í–ê–¶–ò–ò</div>
                                    <div style="font-size: 32px; font-weight: 700; letter-spacing: 4px; color: var(--accent-green); font-family: monospace;">
                                        ${result.redeem_code}
                                    </div>
                                </div>
                                <div style="font-size: 13px; color: var(--text-secondary);">
                                    ${result.cert_name || ''} ¬∑ ${(result.price || 0).toLocaleString()} ‚ÇΩ
                                </div>
                                <div style="font-size: 12px; margin-top: 12px; padding: 8px; border-radius: 8px; background: ${result.telegram_sent ? 'rgba(0,255,136,0.1)' : 'rgba(255,100,100,0.1)'};">
                                    ${telegramStatus}
                                </div>
                            </div>
                            <div class="modal-actions">
                                <button class="btn btn-primary" onclick="closeModal()">–ì–æ—Ç–æ–≤–æ</button>
                            </div>
                        `);
                        showToast('‚úÖ –ö–æ–¥: ' + result.redeem_code, 'success');
                    } else {
                        console.error('‚ùå No redeem_code in response:', result);
                        showModal(`
                            <div class="modal-title">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ</div>
                            <div style="text-align: center; margin: 20px 0;">
                                <div style="color: var(--text-secondary);">
                                    –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –Ω–æ –∫–æ–¥ –Ω–µ –ø–æ–ª—É—á–µ–Ω.<br>
                                    –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: ${JSON.stringify(result)}
                                </div>
                            </div>
                            <div class="modal-actions">
                                <button class="btn btn-primary" onclick="closeModal()">OK</button>
                            </div>
                        `);
                    }
                } else {
                    const errorMsg = result?.detail || result?.error || JSON.stringify(result);
                    console.error('‚ùå Error response:', errorMsg);
                    showModal(`
                        <div class="modal-title">‚ùå –û—à–∏–±–∫–∞</div>
                        <div style="text-align: center; margin: 20px 0; color: var(--text-secondary);">
                            ${errorMsg}
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-primary" onclick="closeModal()">OK</button>
                        </div>
                    `);
                }
            } catch (e) {
                console.error('‚ùå Exception:', e);
                showModal(`
                    <div class="modal-title">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏</div>
                    <div style="text-align: center; margin: 20px 0; color: var(--text-secondary);">
                        <b>${e.name}:</b> ${e.message}<br><br>
                        URL: ${API_URL}/api/admin/certificates/${certId}/paid
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-primary" onclick="closeModal()">OK</button>
                    </div>
                `);
            }
            
            loadCerts();
            loadStats();
        }
        
        async function checkCertCode() {
            const code = document.getElementById('certCodeInput').value.trim();
            if (!code || code.length < 5) {
                showToast('–í–≤–µ–¥–∏—Ç–µ 5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞', 'error');
                return;
            }
            
            try {
                const result = await apiCall(`/api/admin/certificates/check/${code}`);
                if (result) {
                    showCertDetails(result);
                }
            } catch (e) {
                showToast('–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
            }
        }
        
        function showCertDetails(cert) {
            const statusText = cert.status === 'pending' ? '‚è≥ –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã' : 
                               cert.status === 'paid' ? '‚úÖ –ê–∫—Ç–∏–≤–µ–Ω' : 'üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω';
            const statusColor = cert.status === 'pending' ? 'var(--accent-orange)' : 
                                cert.status === 'paid' ? 'var(--accent-green)' : 'var(--text-secondary)';
            
            let actions = '';
            if (cert.status === 'paid') {
                actions = `<button class="btn btn-primary" onclick="useCertByCode('${cert.code}')">üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</button>`;
            } else if (cert.status === 'used') {
                actions = `<div style="text-align: center; padding: 12px; color: var(--text-secondary);">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω ${cert.used_at ? new Date(cert.used_at).toLocaleDateString('ru-RU') : ''}</div>`;
            }
            
            showModal(`
                <div class="modal-title">üéÅ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</div>
                <div style="text-align: center; margin: 16px 0;">
                    <div style="background: rgba(0,255,136,0.1); border-radius: 16px; padding: 16px; margin-bottom: 16px;">
                        <div style="font-size: 11px; color: var(--text-secondary);">–ö–û–î</div>
                        <div style="font-size: 28px; font-weight: 700; letter-spacing: 3px; font-family: monospace; color: var(--accent-cyan);">
                            ${cert.code}
                        </div>
                    </div>
                    
                    <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">${cert.cert_name}</div>
                    <div style="font-size: 24px; font-weight: 700; color: var(--accent-green);">${cert.price?.toLocaleString()} ‚ÇΩ</div>
                    
                    <div style="margin: 16px 0; padding: 12px; background: var(--bg-secondary); border-radius: 12px; font-size: ${statusColor}; font-weight: 500; color: ${statusColor}">
                        ${statusText}
                    </div>
                    
                    <div style="font-size: 14px; color: var(--text-secondary);">
                        üë§ ${cert.recipient_name}
                    </div>
                </div>
                <div class="modal-actions">
                    ${actions}
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            `);
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            document.getElementById('certCodeInput').value = '';
        }
        
        async function useCertByCode(code) {
            showModal(`
                <div class="modal-title">üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?</div>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="background: rgba(255,82,82,0.1); border-radius: 12px; padding: 16px;">
                        <div style="color: var(--accent-red); font-weight: 500;">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</div>
                        <div style="color: var(--text-secondary); font-size: 14px; margin-top: 8px;">
                            –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º
                        </div>
                    </div>
                    <div style="margin-top: 16px; font-size: 20px; font-weight: 700; letter-spacing: 2px; font-family: monospace;">
                        ${code}
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="confirmUseCertByCode('${code}')">‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
        }
        
        async function confirmUseCertByCode(code) {
            try {
                await apiCall(`/api/admin/certificates/use-code/${code}`, { method: 'POST' });
                closeModal();
                loadCerts();
                showToast('‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!');
            } catch (e) {
                showToast('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏', 'error');
            }
        }
        
        async function useCert(certId) {
            showModal(`
                <div class="modal-title">üé´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?</div>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º
                </p>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="confirmUseCert('${certId}')">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
        }
        
        async function confirmUseCert(certId) {
            await apiCall(`/api/admin/certificates/${certId}/use`, { method: 'POST' });
            closeModal();
            loadCerts();
            showToast('–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω');
        }
        
        // ============== CLIENTS ==============
        async function loadClients() {
            const data = await apiCall('/api/admin/clients');
            if (data) {
                clientsData = data;
                renderClients();
            }
        }
        
        function searchClients(query) {
            renderClients(query.toLowerCase());
        }
        
        function renderClients(filter = '') {
            const container = document.getElementById('clientsList');
            let filtered = clientsData;
            
            if (filter) {
                filtered = clientsData.filter(c => 
                    (c.first_name || '').toLowerCase().includes(filter) ||
                    (c.phone || '').includes(filter) ||
                    (c.username || '').toLowerCase().includes(filter)
                );
            }
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üë•</div>
                        <div>–ù–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filtered.map(c => `
                <div class="client-card" onclick="showClientDetails(${c.telegram_id})">
                    <div class="client-avatar">${(c.first_name || '?')[0].toUpperCase()}</div>
                    <div class="client-info">
                        <div class="client-name">${c.first_name || '–ö–ª–∏–µ–Ω—Ç'} ${c.last_name || ''}</div>
                        <div class="client-phone">${c.phone || '–¢–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω'}</div>
                    </div>
                    <div class="client-stats">
                        <div>${c.bookings_count || 0} –∑–∞–ø–∏—Å–µ–π</div>
                        <div>${((c.total_spent || 0) / 1000).toFixed(0)}K ‚ÇΩ</div>
                    </div>
                </div>
            `).join('');
        }
        
        function showClientDetails(telegramId) {
            const client = clientsData.find(c => c.telegram_id === telegramId);
            if (!client) return;
            
            showModal(`
                <div class="modal-title">üë§ ${client.first_name || '–ö–ª–∏–µ–Ω—Ç'}</div>
                <div class="card" style="margin: 16px 0;">
                    <div class="setting-item">
                        <span>üì± –¢–µ–ª–µ—Ñ–æ–Ω</span>
                        <a href="tel:${client.phone}" style="color: var(--accent-cyan)">${client.phone || '‚Äî'}</a>
                    </div>
                    <div class="setting-item">
                        <span>üí¨ Telegram</span>
                        <span>@${client.username || '‚Äî'}</span>
                    </div>
                    <div class="setting-item">
                        <span>üìÖ –ó–∞–ø–∏—Å–µ–π</span>
                        <span>${client.bookings_count || 0}</span>
                    </div>
                    <div class="setting-item">
                        <span>üí∞ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ</span>
                        <span>${(client.total_spent || 0).toLocaleString()} ‚ÇΩ</span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="window.location.href='tel:${client.phone}'">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            `);
        }
        
        // ============== SETTINGS ==============
        async function loadSettings() {
            const data = await apiCall('/api/settings');
            if (data) {
                settings = data;
                document.getElementById('settingName').textContent = data.business_name || '‚Äî';
                document.getElementById('settingAddress').textContent = data.business_address || '‚Äî';
                document.getElementById('settingPhone').textContent = data.business_phone || '‚Äî';
            }
            
            loadServices();
        }
        
        async function loadServices() {
            const data = await apiCall('/api/admin/services');
            if (data) {
                const container = document.getElementById('servicesList');
                container.innerHTML = data.map(s => `
                    <div class="card" style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 500;">${s.name}</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">
                                ${s.duration} –º–∏–Ω ¬∑ ${s.price.toLocaleString()} ‚ÇΩ
                            </div>
                        </div>
                        <span style="color: ${s.is_active ? 'var(--accent-green)' : 'var(--text-secondary)'}">
                            ${s.is_active ? '‚úÖ' : '‚ùå'}
                        </span>
                    </div>
                `).join('');
            }
        }
        
        function editSetting(key) {
            const labels = {
                'business_name': '–ù–∞–∑–≤–∞–Ω–∏–µ',
                'business_address': '–ê–¥—Ä–µ—Å',
                'business_phone': '–¢–µ–ª–µ—Ñ–æ–Ω'
            };
            
            const currentValue = settings[key] || '';
            
            showModal(`
                <div class="modal-title">‚úèÔ∏è ${labels[key]}</div>
                <div class="input-group">
                    <input type="text" class="input-field" id="settingInput" value="${currentValue}">
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="saveSetting('${key}')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
            
            setTimeout(() => document.getElementById('settingInput').focus(), 100);
        }
        
        async function saveSetting(key) {
            const value = document.getElementById('settingInput').value.trim();
            await apiCall(`/api/admin/settings`, {
                method: 'POST',
                body: JSON.stringify({ [key]: value })
            });
            closeModal();
            loadSettings();
            showToast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
        }
        
        function showBroadcastModal() {
            showModal(`
                <div class="modal-title">üì¢ –†–∞—Å—Å—ã–ª–∫–∞</div>
                <div class="input-group">
                    <label class="input-label">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>
                    <textarea class="input-field" id="broadcastText" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏..."></textarea>
                </div>
                <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 16px;">
                    –ë—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º
                </p>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="sendBroadcast()">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            `);
        }
        
        async function sendBroadcast() {
            const text = document.getElementById('broadcastText').value.trim();
            if (!text) {
                showToast('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç', 'error');
                return;
            }
            
            await apiCall('/api/admin/broadcast', {
                method: 'POST',
                body: JSON.stringify({ text })
            });
            
            closeModal();
            showToast('–†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }
        
        // ============== MODAL & TOAST ==============
        function showModal(content) {
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('modal').classList.add('active');
            haptic('medium');
        }
        
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }
        
        function showToast(message, type = 'success') {
            let toast = document.getElementById('toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast';
                toast.style.cssText = `
                    position: fixed;
                    bottom: 100px;
                    left: 50%;
                    transform: translateX(-50%);
                    padding: 12px 24px;
                    border-radius: 12px;
                    z-index: 10000;
                    opacity: 0;
                    transition: opacity 0.3s;
                    font-weight: 500;
                `;
                document.body.appendChild(toast);
            }
            toast.textContent = message;
            toast.style.background = type === 'error' ? 'var(--accent-red)' : 'var(--accent-green)';
            toast.style.color = type === 'error' ? '#fff' : '#000';
            toast.style.opacity = '1';
            setTimeout(() => { toast.style.opacity = '0'; }, 2500);
            
            haptic(type === 'error' ? 'error' : 'success');
        }
        
        // Close modal on backdrop click
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') closeModal();
        });
        
        // ============== BROADCAST ==============
        async function loadSubscribersCount() {
            try {
                const response = await fetch(`${API_URL}/api/subscribers`);
                const data = await response.json();
                document.getElementById('subscribersCount').textContent = 
                    `–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${data.subscribed} –∏–∑ ${data.total_clients}`;
            } catch (e) {
                document.getElementById('subscribersCount').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
            }
        }
        
        function showBroadcastModal() {
            loadSubscribersCount();
            
            showModal(`
                <div class="modal-title">üì¢ –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                <div style="margin-bottom: 16px;">
                    <div id="broadcastSubscribersInfo" style="text-align: center; padding: 12px; background: rgba(99,102,241,0.1); border-radius: 12px; margin-bottom: 16px;">
                        <div style="font-size: 24px; font-weight: 700; color: var(--accent-cyan);" id="modalSubscribersCount">‚Äî</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ø–æ–ª—É—á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                    </div>
                    
                    <label style="display: block; margin-bottom: 6px; color: var(--text-secondary); font-size: 13px;">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>
                    <textarea id="broadcastText" class="input" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏...&#10;–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è *–∂–∏—Ä–Ω—ã–π* –∏ _–∫—É—Ä—Å–∏–≤_" style="width: 100%; resize: none;"></textarea>
                    <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown: *–∂–∏—Ä–Ω—ã–π*, _–∫—É—Ä—Å–∏–≤_</div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" style="flex: 1;" onclick="previewBroadcast()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            `);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
            fetch(`${API_URL}/api/subscribers`)
                .then(r => r.json())
                .then(data => {
                    document.getElementById('modalSubscribersCount').textContent = data.subscribed;
                })
                .catch(() => {});
        }
        
        function previewBroadcast() {
            const text = document.getElementById('broadcastText').value.trim();
            
            if (!text) {
                showToast('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
                return;
            }
            
            showModal(`
                <div class="modal-title">üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                <div style="margin-bottom: 16px;">
                    <div style="background: var(--bg-secondary); border-radius: 12px; padding: 16px; border-left: 4px solid var(--accent-cyan);">
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">ü¶© –§–ª–æ–∞—Ç —Å—Ç—É–¥–∏—è Pelican</div>
                        <div style="white-space: pre-wrap; line-height: 1.5;">${escapeHtml(text)}</div>
                    </div>
                    
                    <div style="margin-top: 16px; padding: 12px; background: rgba(245,158,11,0.1); border-radius: 12px; text-align: center;">
                        <div style="color: var(--accent-orange); font-weight: 500;">‚ö†Ô∏è –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º</div>
                        <div style="color: var(--text-secondary); font-size: 13px; margin-top: 4px;">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" style="flex: 1;" onclick="showBroadcastModal()">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" style="flex: 1;" onclick="sendBroadcast('${encodeURIComponent(text)}')">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            `);
        }
        
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }
        
        async function sendBroadcast(encodedText) {
            const text = decodeURIComponent(encodedText);
            
            showModal(`
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 48px; animation: pulse 1s infinite;">üì§</div>
                    <div style="margin-top: 16px; font-weight: 600;">–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏...</div>
                    <div style="color: var(--text-secondary); font-size: 13px;">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</div>
                </div>
            `);
            
            try {
                const response = await fetch(`${API_URL}/api/admin/broadcast`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showModal(`
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 64px; margin-bottom: 16px;">‚úÖ</div>
                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 12px;">–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>
                            <div style="display: flex; justify-content: center; gap: 24px; margin-bottom: 20px;">
                                <div>
                                    <div style="font-size: 28px; font-weight: 700; color: var(--accent-green);">${result.sent}</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>
                                </div>
                                ${result.failed > 0 ? `
                                    <div>
                                        <div style="font-size: 28px; font-weight: 700; color: var(--accent-red);">${result.failed}</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">–æ—à–∏–±–æ–∫</div>
                                    </div>
                                ` : ''}
                            </div>
                            <button class="btn btn-primary" onclick="closeModal()">–ì–æ—Ç–æ–≤–æ</button>
                        </div>
                    `);
                } else {
                    throw new Error('Broadcast failed');
                }
            } catch (error) {
                console.error('Broadcast error:', error);
                showModal(`
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 64px; margin-bottom: 16px;">‚ùå</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 12px;">–û—à–∏–±–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏</div>
                        <div style="color: var(--text-secondary); margin-bottom: 20px;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑</div>
                        <button class="btn btn-primary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                `);
            }
        }
    </script>
</body>
</html>
